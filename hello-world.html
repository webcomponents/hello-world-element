<!-- Defines element markup -->
<template>
    <p>Hello <strong></strong> :)</p>
</template>

<script>
    // Creates MyElements extending HTML Element
    class MyElement extends HTMLElement {
        // Fires when an instance of the element is created or updated
        constructor() {
            super();

            // Refers to the "importer", which is index.html
            this.thatDoc = document;

            // Refers to the "importee", which is src/hello-world.html
            this.thisDoc = (this.thatDoc._currentScript || this.thatDoc.currentScript).ownerDocument;

            // Gets content from <template>
            this.template = this.thisDoc.querySelector('template');

        }

        static get observedAttributes() {
            return ['who'];
        }

        set who(val) {
            this.strong.textContent = val;
        }

        // Fires when an instance was inserted into the document
        connectedCallback() {
            // Creates the shadow root
            let shadowRoot = this.attachShadow({mode: 'open'});

            // Adds a template clone into shadow root
            const clone = this.template.content.cloneNode(true);
            shadowRoot.appendChild(clone);

            this.strong = shadowRoot.querySelector('strong');

            // Checks if the "who" attribute has been overwritten
            if (this.hasAttribute('who')) {
                this.who = this.getAttribute('who');
            }
            else {
                // Creates the "who" attribute and sets a default value
                this.who = 'World';
            }
        }

        // Fires when an instance was removed from the document
        disconnectedCallback() {
        }

        // Fires when an attribute was added, removed, or updated
        attributeChangedCallback(attrName, oldVal, newVal) {
        }

        // Fires when an attribute was added, removed, or updated
        adoptedCallback() {
        }
    }

    // Registers custom element
    window.customElements.define('hello-world', MyElement);
</script>
